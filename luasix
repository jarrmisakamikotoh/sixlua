-- OPTIMIZED UNTUK MUMU 12
local THREADS = 75  -- Sweet spot untuk MuMu

local RS   = game:GetService("ReplicatedStorage")
local Reqs = RS.TrainEquipment.Remote
local Sys  = RS.TrainSystem.Remote
local RunService = game:GetService("RunService")

local EquipStation = Reqs.ApplyTakeUpStationaryTrainEquipment  
local Stationary   = Reqs.ApplyStationaryTrain                  
local Mobile       = Reqs.ApplyMobileTrain                      
local Speed        = Sys.TrainSpeedHasChanged  

local running = false
local config = {
    TrainSpeed = math.huge,
    bdelay = 0.001  -- Micro delay untuk stabilitas
}

-- Equipment (sekali aja)
task.spawn(function()
    pcall(EquipStation.InvokeServer, EquipStation, "2008")
end)

-- Function utama (tanpa print untuk performa)
local function tickPack()
    pcall(Stationary.InvokeServer, Stationary)
    pcall(Mobile.InvokeServer, Mobile)
    pcall(Speed.FireServer, Speed, config.TrainSpeed)
end

-- Pake RunService (lebih smooth di emulator)
local connection
local function startAll()
    if running then return end
    running = true
    
    connection = RunService.Heartbeat:Connect(function()
        if not running then return end
        
        -- Execute multiple calls per frame
        for i = 1, THREADS do
            task.spawn(tickPack)
        end
        
        if config.bdelay > 0 then
            task.wait(config.bdelay)
        end
    end)
    
    print("âœ… STARTED - Press F to stop")
end

local function stopAll()
    running = false
    if connection then
        connection:Disconnect()
        connection = nil
    end
    print("â›” STOPPED - Press F to start")
end

-- Hotkey F (toggle on/off)
game:GetService("UserInputService").InputBegan:Connect(function(inp, gp)
    if gp then return end
    if inp.KeyCode == Enum.KeyCode.F then
        if running then
            stopAll()
        else
            startAll()
        end
    end
end)

-- Auto-start
startAll()

-- Info
print("========================================")
print("âš¡ MUMU OPTIMIZED SCRIPT")
print("ðŸ”‘ Press F to toggle ON/OFF")
print("ðŸ“Š Threads:", THREADS)
print("========================================")
